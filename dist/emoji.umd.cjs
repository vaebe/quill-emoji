(function(i,s){typeof exports=="object"&&typeof module<"u"?module.exports=s(require("@emoji-mart/data"),require("emoji-mart")):typeof define=="function"&&define.amd?define(["@emoji-mart/data","emoji-mart"],s):(i=typeof globalThis<"u"?globalThis:i||self,i.Emoji=s(i["@emoji-mart/data"],i.EmojiMart))})(this,function(i,s){"use strict";var r=Object.defineProperty;var a=(i,s,o)=>s in i?r(i,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[s]=o;var l=(i,s,o)=>a(i,typeof s!="symbol"?s+"":s,o);const c=class c{constructor(t,e={}){l(this,"quill");l(this,"options");l(this,"picker");l(this,"isPickerVisible");this.quill=t,this.options={...c.DEFAULTS,...e},this.picker=null,this.isPickerVisible=!1,this.init()}init(){const t=this.quill.getModule("toolbar");if(t&&t.container){const e=document.createElement("button");e.className="ql-emoji",e.type="button",e.title="插入表情符号",t.container.appendChild(e),e.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation(),this.isPickerVisible?this.closeDialog():(this.openDialog(),this.isPickerVisible=!0)})}}getButton(){return document.getElementsByClassName("ql-emoji")[0]}openDialog(){var t;if(!this.picker){this.picker=new s.Picker({data:i,onEmojiSelect:n=>this.selectEmoji(n),onClickOutside:n=>this.onClickOutside(n),...this.options}),document.body.appendChild(this.picker);const e=(t=this.getButton())==null?void 0:t.getBoundingClientRect();e&&(this.picker.style.top=`${e.top+25}px`,this.picker.style.left=`${e.left}px`),this.picker.style.boxShadow="0 4px 4px 0 rgba(0, 0, 0, 0.25)",this.picker.style.position="absolute",this.picker.style.zIndex="1"}}selectEmoji(t){const e=this.quill.insertText(this.quill.getSelection(!0).index,t.native,"user");this.closeDialog(),setTimeout(()=>{this.quill.setSelection(this.quill.getSelection(!0).index+e.length())})}onClickOutside(t){const e=this.getButton();(!e||!(e===t.target||t.target instanceof Element&&e.contains(t.target)))&&this.closeDialog()}closeDialog(){var t;this.isPickerVisible=!1,(t=this.picker)==null||t.remove(),this.picker=null}destroy(){this.closeDialog()}};l(c,"DEFAULTS",{theme:"light",locale:"zh",set:"native",skinTonePosition:"none",previewPosition:"bottom",searchPosition:"sticky",categories:["frequent","people","nature","foods","activity","places","objects","symbols","flags"],maxFrequentRows:2,perLine:8,navPosition:"top",noCountryFlags:!1,dynamicWidth:!1});let o=c;return o});
