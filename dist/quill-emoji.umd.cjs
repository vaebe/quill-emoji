(function(i,s){typeof exports=="object"&&typeof module<"u"?module.exports=s(require("@emoji-mart/data"),require("emoji-mart")):typeof define=="function"&&define.amd?define(["@emoji-mart/data","emoji-mart"],s):(i=typeof globalThis<"u"?globalThis:i||self,i.QuillEmoji=s(i["@emoji-mart/data"],i.EmojiMart))})(this,function(i,s){"use strict";var r=Object.defineProperty;var a=(i,s,n)=>s in i?r(i,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[s]=n;var l=(i,s,n)=>a(i,typeof s!="symbol"?s+"":s,n);const c=class c{constructor(t,e={}){l(this,"quill");l(this,"options");l(this,"picker");l(this,"isPickerVisible");this.quill=t,this.options={...c.DEFAULTS,...e},this.picker=null,this.isPickerVisible=!1,this.init()}init(){const t=this.quill.getModule("toolbar");if(t&&t.container){const e=document.createElement("button");e.className="ql-emoji",e.type="button",e.title="插入表情符号",t.container.appendChild(e),e.addEventListener("click",o=>{o.preventDefault(),o.stopPropagation(),this.isPickerVisible?this.closeDialog():this.openDialog()})}}getButton(){return document.getElementsByClassName("ql-emoji")[0]}openDialog(){var t;if(!this.picker){this.picker=new s.Picker({data:i,onEmojiSelect:o=>this.selectEmoji(o),onClickOutside:o=>this.onClickOutside(o),...this.options}),document.body.appendChild(this.picker);const e=(t=this.getButton())==null?void 0:t.getBoundingClientRect();e&&(this.picker.style.top=`${e.top+25}px`,this.picker.style.left=`${e.left}px`),this.picker.style.boxShadow="0 4px 4px 0 rgba(0, 0, 0, 0.25)",this.picker.style.position="absolute",this.picker.style.zIndex="1",this.isPickerVisible=!0}}closeDialog(){var t;this.isPickerVisible=!1,(t=this.picker)==null||t.remove(),this.picker=null}selectEmoji(t){const o=this.quill.getSelection(!0).index;this.quill.insertText(o,t.native,"user"),this.closeDialog(),setTimeout(()=>{this.quill.setSelection(o+t.native.length)},0)}onClickOutside(t){const e=this.getButton();(!e||!(e===t.target||t.target instanceof Element&&e.contains(t.target)))&&this.closeDialog()}destroy(){this.closeDialog()}};l(c,"DEFAULTS",{theme:"light",locale:"zh",set:"native",skinTonePosition:"none",previewPosition:"bottom",searchPosition:"sticky",categories:["frequent","people","nature","foods","activity","places","objects","symbols","flags"],maxFrequentRows:2,perLine:8,navPosition:"top",noCountryFlags:!1,dynamicWidth:!1});let n=c;return n});
